<script>
    // YOUR NEW LIVE SCRIPT URL
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxWKCokM7SsKeaU8PR_74Z_Kot6Sd9JCUciThIjkmUJwR5AkMA0Lu7sqKK5mRxhghxnNQ/exec";

    document.getElementById('artistForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const status = document.getElementById('status'); // Ensure you have a <p id="status"></p>
        const btn = e.target.querySelector('button');
        
        // Show loading state
        btn.innerText = "SENDING...";
        btn.disabled = true;

        // 1. Package data as Form Parameters (Google's preferred language)
        const params = new URLSearchParams();
        params.append("artist", document.getElementById('artist').value);
        params.append("cat", document.getElementById('category').value);
        params.append("ig", document.getElementById('ig').value);
        params.append("perf", document.getElementById('performing').checked ? "YES" : "NO");

        // 2. The Handshake
        fetch(SCRIPT_URL, {
            method: "POST",
            mode: "no-cors", // Bypasses the security 'clog'
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: params
        })
        .then(() => {
            // Success!
            status.innerText = "WELCOME TO THE FEED!";
            status.style.color = "#00ffcc"; // Optional: make it green
            e.target.reset();
            btn.innerText = "CHECK IN";
            btn.disabled = false;
        })
        .catch(err => {
            console.error("Connection Error:", err);
            status.innerText = "Error. Please try again.";
            btn.innerText = "RETRY";
            btn.disabled = false;
        });
    });
</script>